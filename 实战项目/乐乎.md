# Spring Boot开发要点记录

1.如果实体类中的属性跟数据库表中的列名不一致的话，要用@Column注解 绑定一下，如：

```java
@Column(name = "labelname")     // 如果与数据库表中的名称不一致时，要指定对应的列名，请求时的json中也要改为labelName
private String labelName;//标签名称
```

2.在sb 2.0.1中，datasource要用：driver-class-name，不能写成driver.class.name

3.RabbitMQ





## 4.常见的认证机制

### HTTP Basic Auth 

​	HTTP Basic Auth简单点说明就是每次请求API时都提供用户的username和 password，简言之，Basic Auth是配合RESTful API 使用的最简单的认证方式，只需提供 用户名密码即可，但由于有把用户名密码暴露给第三方客户端的风险，在生产环境下被 使用的越来越少。因此，在开发对外开放的RESTful API时，尽量避免采用HTTP Basic Auth 

### Cookie Auth 

​	Cookie认证机制就是为一次请求认证在服务端创建一个Session对象，同时在客户端 的浏览器端创建了一个Cookie对象;通过客户端带上来Cookie对象来与服务器端的 session对象匹配来实现状态管理的。默认的，当我们关闭浏览器的时候，cookie会被删除。但可以通过修改cookie 的expire time使cookie在一定时间内有效; 

![image-20190724232242553](/Users/jack/Desktop/md/images/image-20190724232242553.png)

### OAuth 

​	OAuth(开放授权)是一个开放的授权标准，允许用户让第三方应用访问该用户在 某一web服务上存储的私密的资源(如照片，视频，联系人列表)，而无需将用户名和 密码提供给第三方应用。 

OAuth允许用户提供一个令牌，而不是用户名和密码来访问他们存放在特定服务提 供者的数据。每一个令牌授权一个特定的第三方系统(例如，视频编辑网站)在特定的时 段(例如，接下来的2小时内)内访问特定的资源(例如仅仅是某一相册中的视频)。这 样，OAuth让用户可以授权第三方网站访问他们存储在另外服务提供者的某些特定信 息，而非所有内容 

下面是OAuth2.0的流程: 

![image-20190724232306730](/Users/jack/Desktop/md/images/image-20190724232306730.png)

### Token Auth

 使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的: 

1. 客户端使用用户名跟密码请求登录 
2. 服务端收到请求，去验证用户名与密码 
3. ==验证成功后，服务端会签发一个Token，再把这个Token发送给客户端==
4. 客户端收到Token以后可以把它存储起来，比如放在Cookie里 
5. 客户端每次向服务端请求资源的时候需要带着服务端签发的Token 
6. 服务端收到请求，然后去验证客户端请求里面带着的Token，如果验证成功，就向客户端返回请求的数据 

![image-20190724233022500](/Users/jack/Desktop/md/images/image-20190724233022500.png)

- 支持跨域访问: Cookie是不允许垮域访问的，这一点对Token机制是不存在的，**前提是传输的用户认证信息通过HTTP头传输.** 
- 无状态(也称:服务端可扩展行):**Token机制在服务端不需要存储session信息，因为 Token 自身包含了所有登录用户的信息，只需要在客户端的cookie或本地介质存储 状态信息.** 
- 更适用CDN: 可以通过内容分发网络请求你服务端的所有资料(如:javascript， HTML,图片等)，而你的服务端只要提供API即可.
- 去耦: 不需要绑定到一个特定的身份验证方案。Token可以在任何地方生成，只要在 你的API被调用的时候，你可以进行Token生成调用即可. 
- 更适用于移动应用: 当你的客户端是一个原生平台(iOS, Android，Windows 8等) 时，Cookie是不被支持的(你需要通过Cookie容器进行处理)，这时采用Token认 证机制就会简单得多。 
- CSRF:因为不再依赖于Cookie，所以你就不需要考虑对CSRF(跨站请求伪造)的防 范。 
- 性能: 一次网络往返时间(通过数据库查询session信息)总比做一次HMACSHA256 计算 的Token验证和解析要费时得多.
- 不需要为登录页面做特殊处理: 如果你使用Protractor 做功能测试的时候，不再需要 为登录页面做特殊处理. 
- 基于标准化:你的API可以采用标准化的 JSON Web Token (JWT). 这个标准已经存在多个后端库(.NET, Ruby, Java,Python, PHP)和多家公司的支持(如:Firebase,Google, Microsoft).

## 5.JWT

































