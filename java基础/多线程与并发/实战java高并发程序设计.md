# 一、并行基础入门

## 1.基础概念

- 同步和异步

  同步可以理解为为多个操作串行执行，后一个操作必须等上一个操作完成之后才可以执行；

  异步是多个操作传递执行，一般上个操作执行后会立即返回结果，或者下个操作不需要等待上个操作的返回结果也可以继续往下运行。

  ![image-20190704142610963](https://learningpics.oss-cn-shenzhen.aliyuncs.com/images/image-20190704142610963.png)

- 并发和并行

  并发偏向于交替执行，多个任务之间可能是串行的，即任务A执行完后马上就执行任务B了；而并行是真正的“同时执行”，即多个任务可以同时执行。

  ![image-20190704143355447](https://learningpics.oss-cn-shenzhen.aliyuncs.com/images/image-20190704143355447.png)

  一般单核CPU只有并发不会并行，而实现并行需要多核CPU。

- 临界区

  临界区用来表示一种公共资源或共享数据，可以被多个线程使用，但是一次只能一个线程使用，一旦临界区资源被占用，其他线程要想使用这个资源就必须等待。

- 阻塞和非阻塞：阻塞表示等待其他线程释放资源，非阻塞与其相反

- 死锁、饥饿和活锁

  都不让出资源；无法获取所需资源；都让出资源

## 2.并发级别

- 阻塞：当使用synchronized关键字或者重入锁时，我们得到的就是阻塞线程，在其他线程释放资源之前当前线程都无法执行。
- 无饥饿：对于非公平锁来说线程调度倾向于满足高优先级的线程，可能导致低优先级的线程处于饥饿状态。
- 无障碍：不加锁，都进入临界区，数据不一致 回滚。
- 无锁：无障碍基础上要求 必然有一个线程能够在有限步内完成操作离开临界区 ，如：CAS。
- 无等待：要求所有的线程都必须在有限步内完成 ,**一种典型的无等待结构就是RCU(Read-Copy-Update)，读不加以控制，写修改副本，在合适的时机写回数据。**

## 3.并行相关的两个重要定律

Amdahl定律：加速比 = 优化前系统耗时 / 优化后的系统耗时，当处理器个数趋向与无穷大时，加速比和串行比例成反比。CPU数量越多，串行比列越小，则优化效果越好。

![img](https://learningpics.oss-cn-shenzhen.aliyuncs.com/images/1242400-20190225195928368-1641348550.png)

 Gustafson定律：如果可被并行化的代码所占比重够多，则加速比就能和处理器个数成线性增长。

![img](https://learningpics.oss-cn-shenzhen.aliyuncs.com/images/1242400-20190225203446207-1518288259.png)

























整理自：《实战Java高并发程序设计》一书

<https://www.cnblogs.com/AmyZheng/p/10433409.html>